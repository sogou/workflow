cmake_minimum_required(VERSION 3.6)

set(COMMON_KERNEL_HEADERS
	src/kernel/CommRequest.h
	src/kernel/CommScheduler.h
	src/kernel/Communicator.h
	src/kernel/SleepRequest.h
	src/kernel/ExecRequest.h
	src/kernel/IORequest.h
	src/kernel/Executor.h
	src/kernel/list.h
	src/kernel/mpoller.h
	src/kernel/poller.h
	src/kernel/msgqueue.h
	src/kernel/rbtree.h
	src/kernel/SubTask.h
	src/kernel/thrdpool.h
)

if (WIN32)
	set(INCLUDE_KERNEL_HEADERS
		src/kernel_win/list.h
	)
elseif (CMAKE_SYSTEM_NAME STREQUAL "Linux")
	set(INCLUDE_KERNEL_HEADERS
		${COMMON_KERNEL_HEADERS}
		src/kernel/IOService_linux.h
	)
## liuyang add: change depend openssl to android so ##
elseif (CMAKE_SYSTEM_NAME STREQUAL "Android")
	set(INCLUDE_KERNEL_HEADERS
		${COMMON_KERNEL_HEADERS}
		src/kernel/IOService_linux.h
	)
## liuyang add: change depend openssl to android so ##
elseif (UNIX)
	set(INCLUDE_KERNEL_HEADERS
		${COMMON_KERNEL_HEADERS}
		src/kernel/IOService_thread.h
	)
else ()
	message(FATAL_ERROR "IOService unsupported.")
endif ()

set(INCLUDE_HEADERS
	src/algorithm/DNSRoutine.h
	src/algorithm/MapReduce.h
	src/algorithm/MapReduce.inl
	src/protocol/ProtocolMessage.h
	src/protocol/http_parser.h
	src/protocol/HttpMessage.h
	src/protocol/HttpUtil.h
	src/protocol/redis_parser.h
	src/protocol/RedisMessage.h
	src/protocol/mysql_stream.h
	src/protocol/MySQLMessage.h
	src/protocol/MySQLMessage.inl
	src/protocol/MySQLResult.h
	src/protocol/MySQLResult.inl
	src/protocol/mysql_parser.h
	src/protocol/mysql_types.h
	src/protocol/mysql_byteorder.h
	src/server/WFServer.h
	src/server/WFHttpServer.h
	src/server/WFRedisServer.h
	src/server/WFMySQLServer.h
	src/client/WFMySQLConnection.h
	src/manager/DNSCache.h
	src/manager/WFGlobal.h
	src/manager/UpstreamManager.h
	src/manager/RouteManager.h
	src/manager/EndpointParams.h
	src/manager/WFFuture.h
	src/manager/WFFacilities.h
	src/manager/WFFacilities.inl
	src/util/EncodeStream.h
	src/util/LRUCache.h
	src/util/StringUtil.h
	src/util/URIParser.h
	src/util/MD5Util.h
	src/factory/WFConnection.h
	src/factory/WFTask.h
	src/factory/WFTask.inl
	src/factory/WFGraphTask.h
	src/factory/WFTaskError.h
	src/factory/WFTaskFactory.h
	src/factory/WFTaskFactory.inl
	src/factory/WFAlgoTaskFactory.h
	src/factory/WFAlgoTaskFactory.inl
	src/factory/Workflow.h
	src/factory/WFOperator.h
	src/nameservice/WFNameService.h
	src/nameservice/WFDNSResolver.h
	src/nameservice/WFServiceGovernance.h
	src/nameservice/UpstreamPolicies.h
)

if(KAFKA STREQUAL "y")
	set(INCLUDE_HEADERS
		${INCLUDE_HEADERS}
		src/util/crc32c.h
		src/protocol/KafkaMessage.h
		src/protocol/KafkaDataTypes.h
		src/protocol/KafkaResult.h
		src/protocol/kafka_parser.h
		src/client/WFKafkaClient.h
		src/factory/KafkaTaskImpl.inl
	)
endif()

## liuyang add: change depend openssl to android so ##
if(CMAKE_SYSTEM_NAME STREQUAL "Android")
	set(INCLUDE_OPENSSL_HEADERS
		include/openssl/pem2.h
        include/openssl/kdf.h
        include/openssl/pem.h
        include/openssl/asyncerr.h
        include/openssl/md2.h
        include/openssl/ssl3.h
        include/openssl/ossl_typ.h
        include/openssl/dtls1.h
        include/openssl/err.h
        include/openssl/bn.h
        include/openssl/blowfish.h
        include/openssl/cms.h
        include/openssl/engine.h
        include/openssl/conf_api.h
        include/openssl/x509.h
        include/openssl/asn1_mac.h
        include/openssl/objectserr.h
        include/openssl/cmserr.h
        include/openssl/ui.h
        include/openssl/sha.h
        include/openssl/symhacks.h
        include/openssl/asn1.h
        include/openssl/bioerr.h
        include/openssl/opensslconf.h
        include/openssl/bio.h
        include/openssl/rc2.h
        include/openssl/dh.h
        include/openssl/x509v3.h
        include/openssl/conf.h
        include/openssl/rand_drbg.h
        include/openssl/md5.h
        include/openssl/pemerr.h
        include/openssl/x509_vfy.h
        include/openssl/txt_db.h
        include/openssl/comperr.h
        include/openssl/cterr.h
        include/openssl/safestack.h
        include/openssl/ecdsa.h
        include/openssl/sslerr.h
        include/openssl/rc5.h
        include/openssl/uierr.h
        include/openssl/x509v3err.h
        include/openssl/objects.h
        include/openssl/pkcs12.h
        include/openssl/crypto.h
        include/openssl/opensslv.h
        include/openssl/evperr.h
        include/openssl/pkcs7.h
        include/openssl/obj_mac.h
        include/openssl/ct.h
        include/openssl/async.h
        include/openssl/buffer.h
        include/openssl/ssl.h
        include/openssl/srp.h
        include/openssl/camellia.h
        include/openssl/dherr.h
        include/openssl/evp.h
        include/openssl/e_os2.h
        include/openssl/md4.h
        include/openssl/hmac.h
        include/openssl/aes.h
        include/openssl/engineerr.h
        include/openssl/comp.h
        include/openssl/pkcs12err.h
        include/openssl/cast.h
        include/openssl/rc4.h
        include/openssl/stack.h
        include/openssl/des.h
        include/openssl/ocsp.h
        include/openssl/ec.h
        include/openssl/ecdh.h
        include/openssl/rand.h
        include/openssl/ecerr.h
        include/openssl/ts.h
        include/openssl/cryptoerr.h
        include/openssl/storeerr.h
        include/openssl/buffererr.h
        include/openssl/seed.h
        include/openssl/modes.h
        include/openssl/ssl2.h
        include/openssl/tserr.h
        include/openssl/rsa.h
        include/openssl/ripemd.h
        include/openssl/whrlpool.h
        include/openssl/tls1.h
        include/openssl/rsaerr.h
        include/openssl/randerr.h
        include/openssl/mdc2.h
        include/openssl/ocsperr.h
        include/openssl/x509err.h
        include/openssl/pkcs7err.h
        include/openssl/dsa.h
        include/openssl/kdferr.h
        include/openssl/srtp.h
        include/openssl/asn1t.h
        include/openssl/dsaerr.h
        include/openssl/bnerr.h
        include/openssl/conferr.h
        include/openssl/cmac.h
        include/openssl/ebcdic.h
        include/openssl/store.h
        include/openssl/idea.h
        include/openssl/lhash.h
        include/openssl/asn1err.h)
endif()
## liuyang add: change depend openssl to android so ##